<!DOCTYPE html>
<html>
    <head>
      <meta name="generator" content="selectomatic"/>
      <meta name="timestamp" content="2018-02-12 02:26:13"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    <h2>Selectomatic!</h2>
    <h3>your user friendly interactive field selector</h3>
<fieldset style="display: inline;">
    <legend>allOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>allOrgs-ccgOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-ccgOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>allOrgs-councilOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-councilOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>allOrgs-hospitalOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-hospitalOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>allOrgs-otherOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-otherOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>allOrgs-universityOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-universityOrgs" value="Organisation"/>
    Organisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>orgCheck</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="releaseID"/>
    releaseID
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="NICNumber"/>
    NICNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="RefNumber"/>
    RefNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="releaseOrganisation"/>
    releaseOrganisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="purposeOrganisation"/>
    purposeOrganisation
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>orgCheck-info</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="OrganisationName"/>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Organisation"/>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="us"/>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="DataProvided"/>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Sensitive"/>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="LegalBasisForProvision"/>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="OneOff"/>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="PatientOptOutsApplied"/>
    PatientOptOutsApplied
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Objective"/>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ProcessingActivities"/>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ExpectedOutput"/>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ExpectedBenefits"/>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>otherOrgsInfo</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="OrganisationName"/>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Organisation"/>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="us"/>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="DataProvided"/>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Sensitive"/>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="LegalBasisForProvision"/>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="OneOff"/>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="PatientOptOutsApplied"/>
    PatientOptOutsApplied
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Objective"/>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ProcessingActivities"/>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ExpectedOutput"/>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ExpectedBenefits"/>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>purposes</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Key"/>
    Key
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="RefNumber"/>
    RefNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Organisation"/>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Objective"/>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ProcessingActivities"/>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ExpectedOutput"/>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ExpectedBenefits"/>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>releases</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="RowID"/>
    RowID
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="OrganisationName"/>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="us"/>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="DataProvided"/>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="Sensitive"/>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="LegalBasisForProvision"/>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="Purpose"/>
    Purpose
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="OneOff"/>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="NICNumber"/>
    NICNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="MRNumber"/>
    MRNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="PatientOptOutsApplied"/>
    PatientOptOutsApplied
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>sectionMarkdown</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sectionMarkdown" value="id"/>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sectionMarkdown" value="markdown"/>
    markdown
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>sections</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="id"/>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="title"/>
    title
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="blurb"/>
    blurb
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="sql"/>
    sql
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="seq"/>
    seq
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>subSectionMarkdown</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="parentId"/>
    parentId
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="id"/>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="markdown"/>
    markdown
    </label>
    
    </fieldset><br/>
<fieldset style="display: inline;">
    <legend>subSections</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="parentId"/>
    parentId
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="id"/>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="title"/>
    title
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="blurb"/>
    blurb
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="sql"/>
    sql
    </label>
    
    </fieldset><br/>
    <textarea row="6" cols="75" id="sqlText" placeholder="sql will appear here, as if by magic"></textarea>


    <script type="text/javascript">

    function doFieldChange()
    {
        selectoInputs = document.getElementsByClassName("selectomaticInput");
        var fieldList = "";
        var fieldCount = 0;
        let tableSet = new Set();
        var i;
        for (i = 0; i < selectoInputs.length; i += 1)
        {
            if (selectoInputs[i].type == "checkbox")
            {
                // console.log(selectoInputs[i]);
                if (selectoInputs[i].checked)
                {
                    if (fieldCount > 0)
                    {
                        fieldList += ",";
                    }
                    fieldCount++;
                    fieldList += selectoInputs[i].name + "." + selectoInputs[i].value;
                    tableSet.add(selectoInputs[i].name);
                }
            }
        }
        //console.log(fieldList);
        //console.log(tableSet);

        var tableArr = [...tableSet]; // Sets seemingly write only...
        var tableStr = "";
        for (i = 0; i < tableArr.length; i++)
        {
            if (i > 0)
            {
                tableStr += ",";
            }
            tableStr += tableArr[i];
        }

        var selectStr = "";
        if (fieldList.length > 0)
        {
            selectStr = "SELECT DISTINCT " + fieldList + " FROM\n" + tableStr + ";";
        }
        //console.log(selectStr);

        thingy = document.getElementById("sqlText");
        thingy.innerHTML = selectStr;
    }
</script>

    </body>
</html>

