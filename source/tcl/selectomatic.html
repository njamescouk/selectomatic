<!DOCTYPE html>
<html>
    <head>
      <meta name="generator" content="selectomatic"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body>
    <h2>Selectomatic!</h2>
    <h3>your user friendly interactive field selector</h3>
    <fieldset style="display: inline;">
    <legend>allOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>allOrgs-ccgOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-ccgOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>allOrgs-councilOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-councilOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>allOrgs-hospitalOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-hospitalOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>allOrgs-otherOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-otherOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>allOrgs-universityOrgs</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="allOrgs-universityOrgs" value="Organisation"></input>
    Organisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>orgCheck</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="releaseID"></input>
    releaseID
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="NICNumber"></input>
    NICNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="RefNumber"></input>
    RefNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="releaseOrganisation"></input>
    releaseOrganisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck" value="purposeOrganisation"></input>
    purposeOrganisation
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>orgCheck-info</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="OrganisationName"></input>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Organisation"></input>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="us"></input>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="DataProvided"></input>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Sensitive"></input>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="LegalBasisForProvision"></input>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="OneOff"></input>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="PatientOptOutsApplied"></input>
    PatientOptOutsApplied
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="Objective"></input>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ProcessingActivities"></input>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ExpectedOutput"></input>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="orgCheck-info" value="ExpectedBenefits"></input>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>otherOrgsInfo</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="OrganisationName"></input>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Organisation"></input>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="us"></input>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="DataProvided"></input>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Sensitive"></input>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="LegalBasisForProvision"></input>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="OneOff"></input>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="PatientOptOutsApplied"></input>
    PatientOptOutsApplied
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="Objective"></input>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ProcessingActivities"></input>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ExpectedOutput"></input>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="otherOrgsInfo" value="ExpectedBenefits"></input>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>purposes</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Key"></input>
    Key
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="RefNumber"></input>
    RefNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Organisation"></input>
    Organisation
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="Objective"></input>
    Objective
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ProcessingActivities"></input>
    ProcessingActivities
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ExpectedOutput"></input>
    ExpectedOutput
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="purposes" value="ExpectedBenefits"></input>
    ExpectedBenefits
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>releases</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="RowID"></input>
    RowID
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="OrganisationName"></input>
    OrganisationName
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="us"></input>
    us
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="DataProvided"></input>
    DataProvided
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="Sensitive"></input>
    Sensitive
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="LegalBasisForProvision"></input>
    LegalBasisForProvision
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="Purpose"></input>
    Purpose
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="OneOff"></input>
    OneOff
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="NICNumber"></input>
    NICNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="MRNumber"></input>
    MRNumber
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="releases" value="PatientOptOutsApplied"></input>
    PatientOptOutsApplied
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>sectionMarkdown</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sectionMarkdown" value="id"></input>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sectionMarkdown" value="markdown"></input>
    markdown
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>sections</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="id"></input>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="title"></input>
    title
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="blurb"></input>
    blurb
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="sql"></input>
    sql
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="sections" value="seq"></input>
    seq
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>subSectionMarkdown</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="parentId"></input>
    parentId
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="id"></input>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSectionMarkdown" value="markdown"></input>
    markdown
    </label>
    
    </fieldset><br/>
    <fieldset style="display: inline;">
    <legend>subSections</legend>
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="parentId"></input>
    parentId
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="id"></input>
    id
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="title"></input>
    title
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="blurb"></input>
    blurb
    </label>
    
    <label>
    <input class="selectomaticInput" type="checkbox" onclick="doFieldChange()" name="subSections" value="sql"></input>
    sql
    </label>
    
    </fieldset><br/>
    <textarea row="6" cols="75" id="sqlText" placeholder="sql will appear here, as if by magic"></textarea>
    

    <script type="text/javascript">
    function doFieldChange()
    {
        selectoInputs = document.getElementsByClassName("selectomaticInput");
        var fieldList = "";
        var fieldCount = 0;
        let tableSet = new Set();
        var i;
        for (i = 0; i < selectoInputs.length; i += 1)
        {
            if (selectoInputs[i].type == "checkbox")
            {
                // console.log(selectoInputs[i]);
                if (selectoInputs[i].checked)
                {
                    if (fieldCount > 0)
                    {
                        fieldList += ",";
                    }
                    fieldCount++;
                    fieldList += selectoInputs[i].name + "." + selectoInputs[i].value;
                    tableSet.add(selectoInputs[i].name);
                }
            }
        }
        //console.log(fieldList);
        //console.log(tableSet);

        var tableArr = [...tableSet]; // Sets seemingly write only...
        var tableStr = "";
        for (i = 0; i < tableArr.length; i++)
        {
            if (i > 0)
            {
                tableStr += ",";
            }
            tableStr += tableArr[i];
        }

        var selectStr = "";
        if (fieldList.length > 0)
        {
            selectStr = "SELECT DISTINCT " + fieldList + " FROM\n" + tableStr + ";";
        }
        //console.log(selectStr);

        thingy = document.getElementById("sqlText");
        thingy.innerHTML = selectStr;
    }
    </script>
    </body>
</html>
    
